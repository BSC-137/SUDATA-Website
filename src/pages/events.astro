---
import Layout from '../layouts/Layout.astro';
import EventCalendar from '../components/EventCalendar.jsx';
import UpcomingEvents from '../components/UpcomingEvents.jsx';
import { readFileSync } from 'node:fs';
import { join } from 'node:path';

const pageTitle = 'Events | SUDATA';

const eventsJson = readFileSync(join(process.cwd(), 'src/data/events.json'), 'utf-8');
const eventsData = JSON.parse(eventsJson);
---


<Layout title={pageTitle}>
  <div class="min-h-screen bg-[#020617] text-[#94a3b8] pt-24 pb-16 px-4">

    <!-- Header -->
    <div class="max-w-7xl mx-auto mb-12">
      <div class="text-center mb-8">
        <h1 class="text-5xl md:text-6xl font-bold mb-4">
          <span class="text-[#00F0FF]" style="text-shadow: 0 0 20px #00F0FF, 0 0 40px #00F0FF;">
            Events
          </span>
        </h1>
        <p class="text-[#94a3b8] font-mono-tech text-lg tracking-wide mb-6">
          [ Temporal Data Stream ]
        </p>

        <!-- UPCOMING_EVENTS section -->
        <div class="reveal-on-scroll max-w-7xl mx-auto mb-8 text-left">
          <UpcomingEvents events={eventsData.events} client:load />
        </div>

        <!-- CALENDAR_GUIDE section (renamed from NAVIGATION_PROTOCOL) -->
        <div class="reveal-on-scroll terminal-block scanline-overlay p-8 max-w-7xl mx-auto mb-8">
          <div class="relative z-10">
            <div class="font-mono-tech text-sudata-neon/80 text-sm tracking-[0.2em] mb-4 flex items-center gap-2">
              <span class="animate-flicker">&gt;_</span>
              <span>[SECTION: CALENDAR_GUIDE]</span>
            </div>
            <h2 class="text-xl font-bold text-white font-mono-tech tracking-widest mb-4 text-left">
              Interface Guide
            </h2>
            <div class="text-sudata-grey font-mono-tech text-sm leading-relaxed space-y-3 text-left">
              <p>
                Navigate through SUDATA's temporal event stream spanning multiple years. The calendar interface allows you to filter events by typeâ€”whether you're hunting for technical workshops, social mixers, or industry networking opportunities.
              </p>
              <div class="text-sudata-neon/70 text-xs tracking-wider space-y-1">
                <div class="flex items-start gap-2">
                  <span class="text-sudata-neon mt-0.5">&gt;</span>
                  <span>Click any event card to expand full details and registration info</span>
                </div>
                <div class="flex items-start gap-2">
                  <span class="text-sudata-neon mt-0.5">&gt;</span>
                  <span>Select category filters to display only specific event types (multi-select enabled)</span>
                </div>
                <div class="flex items-start gap-2">
                  <span class="text-sudata-neon mt-0.5">&gt;</span>
                  <span>Scroll through past archives or upcoming sessions</span>
                </div>
                <div class="flex items-start gap-2">
                  <span class="text-sudata-neon mt-0.5">&gt;</span>
                  <span>All timestamps synced to local timezone</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Calendar Component -->
    <div class="max-w-7xl mx-auto">
      <EventCalendar events={eventsData.events} client:load />
    </div>

  </div>
</Layout>

<style>
  html {
    scroll-behavior: smooth;
  }
</style>
