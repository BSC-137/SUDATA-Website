---
import Layout from "../layouts/Layout.astro";
import AlbumCarousel from "../components/AlbumCarousel.astro";
import { loadAlbum } from "../lib/albums";

// For some reason we need to add every other file ext?? Doesn't show image otherwise
const innGlob = import.meta.glob("../assets/albums/inn/*.{jpg,jpeg,png,webp,avif}", {
  eager: true,
  import: "default",
});

const ballGlob = import.meta.glob("../assets/albums/ball/*.{jpg,jpeg,png,webp,avif}", {
  eager: true,
  import: "default",
});

const startupGlob = import.meta.glob("../assets/albums/startup/*.{jpg,jpeg,png,webp,avif}", {
  eager: true,
  import: "default",
});

const albums = [
  {
    name: "INN 2025",
    date: "May 2025",
    images: loadAlbum(innGlob, "INN 2025"),
    link: "https://photos.app.goo.gl/sPAGscihAqiscHNU6"
  },
  {
    name: "Startup Night",
    date: "Sept 2025",
    images: loadAlbum(startupGlob, "Startup Night"),
    link: "https://photos.app.goo.gl/Ts9CYAZnoeQV1dsS9"
  },
  {
    parts: ["SUDATA", "SUMATH", "UNSWMATH Ball '25"],
    date: "Oct 2025",
    images: loadAlbum(ballGlob, "Ball 2025"),
    link: "https://photos.app.goo.gl/KkFssZJXDh3iFj2M9"
  }
]
---
<Layout title="SUDATA | Photos">
  <div class="flex flex-col w-full max-w-4xl mx-auto space-y-24 pt-32 pb-24 px-4">

    <header class="reveal-on-scroll text-center space-y-4">
      <h1 class="text-4xl md:text-6xl font-bold text-sudata-neon tracking-widest neon-text-shadow font-mono-tech">
        Photos
      </h1>
      <p class="text-sudata-grey font-mono-tech text-lg tracking-wide"> 
        Explore highlights from past SUDATA events. Click an event title to view and download the full album on Google Photos.
      </p>
    </header>

    {albums.map((a) => (
      <section class="reveal-on-scroll terminal-block scanline-overlay p-6 md:p-10 space-y-6">
        <div class="flex items-start justify-between gap-6 flex-wrap">
          <div class="space-y-2">
            <h2 class="text-2xl md:text-3xl font-bold text-white font-mono-tech">
              <span class="text-sudata-neon animate-flicker">&gt;_</span>
                <a
                  href={a.link}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="hover:text-sudata-neon hover:underline underline-offset-4 transition-all duration-300"
                >
                  {a.parts ? (
                    <>
                      <span class="tracking-widest">{a.parts[0]}</span>
                      <span class="italic opacity-80 -ml-[0.57em] mr-[-0.5em]">x</span>
                      <span class="tracking-widest">{a.parts[1]}</span>
                      <span class="italic opacity-80 -ml-[0.57em] mr-[-0.5em]">x</span>
                      <span class="tracking-widest">{a.parts[2]}</span>
                    </>
                  ) : (
                    a.name
                  )}       
                </a>
            </h2>
            <p class="text-sudata-grey font-mono-tech text-sm tracking-[0.2em]">
              {a.date}
            </p>
          </div>
        </div>

        <AlbumCarousel
          images={a.images}
          height={420}
          description="Tap to view!"
          crtWarp={0.28}
          crtEdge={0.45}
          scanStrength={0.22}
        />
      </section>
    ))}
  </div>
</Layout>
