---
import Layout from '../layouts/Layout.astro';
import ExecutiveCarousel from '../components/ExecutiveCarousel.jsx';
import CommunityCharts from '../components/CommunityCharts.jsx';
import { processChartData } from '../utils/processChartData.js';
import { readFileSync } from 'node:fs';
import { join } from 'node:path';

// process.cwd() reliably resolves to project root in both dev and on Vercel
const csvPath = join(process.cwd(), 'public/society_data/sudata_members_cleaned.csv');

// Load and process CSV data
const csvContent = readFileSync(csvPath, 'utf-8');
const { majorData, degreeData, genderData, ethnicityData } = processChartData(csvContent);

const webArchitects = [
  { name: 'Olivia Peng', role: 'Technical Lead', linkedin: 'https://www.linkedin.com/in/oliviapeng26/', image: '/assets/execs/olivia.jpeg' },
  { name: 'Bharat Sharma', role: 'Web Architect', linkedin: 'https://www.linkedin.com/in/bharat-sharma-1150ba285/', image: '/assets/execs/bharat.jpeg' },
  { name: 'Shreejit Murthy', role: 'Web Architect', linkedin: 'https://www.linkedin.com/in/shreejit-murthy/', image: '/assets/execs/shreejit.jpeg' },
];
---

<Layout title="About | SUDATA">
	<div class="flex flex-col w-full max-w-4xl mx-auto space-y-12 sm:space-y-16 md:space-y-24 pt-24 sm:pt-28 md:pt-32 pb-16 sm:pb-20 md:pb-24 px-4">
		<!-- Page title -->
		<header class="reveal-on-scroll text-center space-y-2 sm:space-y-4">
			<h1 class="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-sudata-neon tracking-wider sm:tracking-widest neon-text-shadow font-mono-tech">
				About SUDATA
			</h1>
			<p class="text-sudata-grey font-mono-tech text-base sm:text-lg tracking-wide">
				[ Sydney University Data Society ]
			</p>
		</header>

		<!-- [SECTION: MISSION_LOG] -->
		<section class="reveal-on-scroll terminal-block scanline-overlay p-6 sm:p-8 md:p-10">
			<div class="relative z-10">
				<div class="font-mono-tech text-sudata-neon/80 text-sm tracking-[0.2em] mb-4 flex items-center gap-2">
					<span class="animate-flicker">&gt;_</span>
					<span class="whitespace-nowrap text-xs sm:text-sm">[SECTION: MISSION_LOG]</span>
				</div>
				<h2 class="text-2xl md:text-3xl font-bold text-white font-mono-tech tracking-widest mb-6">
					The Human Layer of Data Science
				</h2>
				<p class="text-sudata-grey font-mono-tech text-base md:text-lg leading-relaxed">
					At SUDATA, we believe that data is more than just raw numbers and cold logic—it's the DNA of the modern world. But even the most complex systems need a heart. We are a hybrid collective: one part academic powerhouse, one part industrial pipeline, and one part vibrant family. Our mission is to bridge the gap between classroom theory and real-world impact, all while building a community where every member feels like they belong.
				</p>
			</div>
		</section>

		<!-- [SECTION: CORE_PILLARS] -->
		<section class="reveal-on-scroll terminal-block scanline-overlay p-6 sm:p-8 md:p-10">
			<div class="relative z-10">
				<div class="font-mono-tech text-sudata-neon/80 text-sm tracking-[0.2em] mb-6 flex items-center gap-2">
					<span class="animate-flicker">_</span>
					<span class="whitespace-nowrap text-xs sm:text-sm">[SECTION: CORE_PILLARS]</span>
				</div>

				<div class="space-y-4 md:space-y-10">
					<!-- 01. THE SOCIAL FABRIC -->
					<details class="pillar-item" open>
						<summary class="cursor-pointer list-none flex items-center justify-between gap-2 py-2 md:cursor-default">
							<div>
								<div class="font-mono-tech text-sudata-neon text-sm tracking-[0.2em] mb-1">
									01. THE SOCIAL FABRIC
								</div>
								<h3 class="text-xl font-bold text-white font-mono-tech tracking-wider">
									Work Hard, Play Harder.
								</h3>
							</div>
							<span class="pillar-chevron font-mono-tech text-sudata-neon text-lg md:hidden">▾</span>
						</summary>
						<p class="text-sudata-grey font-mono-tech text-base leading-relaxed pt-3">
							We aren’t just a society; we’re a bustling ecosystem of like-minded people. From high-energy parties and casual pub nights to late-night study grinds, SUDATA is where you find your “nodes”—lifelong friends who share your drive. We take our social life as seriously as our datasets, ensuring there’s always a welcoming space to meet new people and step away from the screen.
						</p>
					</details>

					<!-- 02. INDUSTRIAL SYNERGY -->
					<details class="pillar-item" open>
						<summary class="cursor-pointer list-none flex items-center justify-between gap-2 py-2 md:cursor-default">
							<div>
								<div class="font-mono-tech text-sudata-neon text-sm tracking-[0.2em] mb-1">
									02. INDUSTRIAL SYNERGY
								</div>
								<h3 class="text-xl font-bold text-white font-mono-tech tracking-wider">
									Your High-Bandwidth Career Pipeline.
								</h3>
							</div>
							<span class="pillar-chevron font-mono-tech text-sudata-neon text-lg md:hidden">▾</span>
						</summary>
						<p class="text-sudata-grey font-mono-tech text-base leading-relaxed pt-3">
							We boast extensive industry connections that put our members directly in front of the world’s leading tech and data firms. Our networking events aren’t just about handing out resumes; they are about building genuine relationships with professionals. Whether it’s an exclusive industry dinner or a formal networking night, we provide the bandwidth you need to launch your career.
						</p>
					</details>

					<!-- 03. THE FORGE -->
					<details class="pillar-item" open>
						<summary class="cursor-pointer list-none flex items-center justify-between gap-2 py-2 md:cursor-default">
							<div>
								<div class="font-mono-tech text-sudata-neon text-sm tracking-[0.2em] mb-1">
									03. THE FORGE: HACKATHONS & LABS
								</div>
								<h3 class="text-xl font-bold text-white font-mono-tech tracking-wider">
									Where Theory Meets Execution.
								</h3>
							</div>
							<span class="pillar-chevron font-mono-tech text-sudata-neon text-lg md:hidden">▾</span>
						</summary>
						<p class="text-sudata-grey font-mono-tech text-base leading-relaxed pt-3">
							Our workshops and hackathons are the heartbeat of our academic side. We host high-intensity events designed to push your limits, from Python deep-dives to neural network builds. It’s collaborative, it’s competitive, and it’s the best way to level up your stack alongside the brightest minds at the University of Sydney.
						</p>
					</details>
				</div>

				<script>
					if (typeof window !== 'undefined' && window.innerWidth < 768) {
						document.querySelectorAll('.pillar-item').forEach(function(el) { el.removeAttribute('open'); });
					}
					document.querySelectorAll('.pillar-item').forEach(function(el) {
						el.addEventListener('toggle', function() {
							var chevron = el.querySelector('.pillar-chevron');
							if (chevron) chevron.textContent = el.open ? '▾' : '▸';
						});
					});
				</script>
			</div>
		</section>

		<!-- [SECTION: COMMUNITY_COMPOSITION] -->
		<section class="reveal-on-scroll terminal-block scanline-overlay p-6 sm:p-8 md:p-10">
			<div class="relative z-10">
				<div class="font-mono-tech text-sudata-neon/80 text-sm tracking-[0.2em] mb-6 flex items-center gap-2">
					<span class="animate-flicker">_</span>
					<span class="whitespace-nowrap text-xs sm:text-sm">[SECTION: COMMUNITY_COMPOSITION]</span>
				</div>
				<h2 class="text-2xl md:text-3xl font-bold text-white font-mono-tech tracking-widest mb-6">
					Our Community in Data
				</h2>
				<p class="text-sudata-grey font-mono-tech text-base md:text-lg leading-relaxed mb-8">
					Diversity is our strength. Meet the vibrant community of SUDATA members.
				</p>
				
				<CommunityCharts
					majorData={majorData}
					degreeData={degreeData}
					genderData={genderData}
					ethnicityData={ethnicityData}
					client:visible
				/>
			</div>
		</section>

		<!-- [SECTION: EXEC_TEAM_HEADER] -->
		<section class="reveal-on-scroll w-full">
			<div class="font-mono-tech text-sudata-neon/80 text-sm tracking-[0.2em] mb-4 flex justify-center gap-2">
				<span class="animate-flicker">_</span>
				<span class="whitespace-nowrap text-xs sm:text-sm">[SECTION: EXECS]</span>
			</div>
			<h2 class="text-2xl md:text-4xl font-bold text-white font-mono-tech tracking-widest mb-2 text-center">
				Meet the Architects
			</h2>
			<p class="text-sudata-grey font-mono-tech text-sm md:text-base tracking-wide text-center mb-10 max-w-2xl mx-auto">
				The team behind the terminal. Our executive board is a diverse group of student leaders dedicated to maintaining the SUDATA ecosystem and ensuring every member has the resources to thrive.
			</p>
			<div class="w-full overflow-hidden px-2 sm:px-4">
				<ExecutiveCarousel client:visible />
			</div>
		</section>

		<!-- [SECTION: WEB_ARCHITECTS] -->
		<section class="reveal-on-scroll w-full">
			<div class="font-mono-tech text-sudata-neon/80 text-xs sm:text-sm tracking-[0.2em] mb-3 sm:mb-4 flex justify-center gap-2">
				<span class="animate-flicker">_</span>
				<span class="whitespace-nowrap">[SECTION: WEB_ARCHITECTS]</span>
			</div>
			<h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-white font-mono-tech tracking-wider sm:tracking-widest mb-2 text-center px-4">
				Web Architects
			</h2>
			<p class="text-sudata-grey font-mono-tech text-xs sm:text-sm md:text-base tracking-wide text-center mb-6 sm:mb-8 md:mb-10 max-w-2xl mx-auto px-4">
				The team that built this digital experience.
			</p>
			<div class="w-full overflow-hidden px-2 sm:px-4">
				<ExecutiveCarousel executives={webArchitects} client:visible />
			</div>
		</section>

		<!-- [CHEEKY "DATA" FOOTER] -->
		<footer class="reveal-on-scroll terminal-block scanline-overlay p-6 sm:p-8 md:p-10">
			<div class="relative z-10">
				<div class="font-mono-tech text-sudata-neon/80 text-sm tracking-[0.2em] mb-6 flex items-center gap-2">
					<span>// EOF: COMMUNITY_METRICS</span>
				</div>
				<div class="font-mono-tech text-sudata-neon/90 text-sm md:text-base tracking-wider space-y-3">
					<p class="text-white/90 font-bold">SOCIAL_STATISTICS_v1.0</p>
					<p class="text-sudata-grey">New Friendships Initialized: ∞</p>
					<p class="text-sudata-grey">Coffee to Code Conversion: 98% Efficiency</p>
					<p class="text-sudata-grey">System Status: Healthy & Growing</p>
					<p class="text-sudata-neon/90 mt-4">Protocol: Join the Family</p>
				</div>
			</div>
		</footer>
	</div>
<style>
  /* Desktop: pillar details always open, summary not interactive */
  @media (min-width: 768px) {
    .pillar-item > *:not(summary) { display: block !important; }
    .pillar-item summary { pointer-events: none; }
  }
  /* Remove default marker */
  .pillar-item summary::-webkit-details-marker { display: none; }
  .pillar-item summary { list-style: none; }
</style>
</Layout>
